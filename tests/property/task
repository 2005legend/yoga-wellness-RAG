Implementation Plan: Wellness RAG Application - "Ask Me Anything About Yoga"

## Overview

This implementation plan converts the "Ask Me Anything About Yoga" RAG application design into a series of incremental coding tasks. The approach focuses on building core RAG functionality first, then adding the mandatory safety mechanisms for yoga/health queries, logging infrastructure, and user interfaces.

## Tasks

- [x] 1. Set up project structure and core dependencies
  - Create Python project structure with proper package organization
  - Set up virtual environment and install core dependencies (FastAPI, MongoDB, vector database client)
  - Configure development environment with linting, formatting, and testing tools
  - _Requirements: 6.1, 8.1_

- [ ] 2. Implement Yoga knowledge base processing pipeline
  - [ ] 2.1 Create document chunking service
    - Implement semantic chunking with 256-512 token segments
    - Add metadata extraction (Source Title, ID)
    - _Requirements: 1.1, 3.2_

  - [ ] 2.2 Build/Collect Yoga Knowledge Base (20-50 Articles)
    - **Action**: Collect public info/write notes on:
      - Common Asanas (poses)
      - Benefits & Contraindications
      - Pranayama (breathing)
      - Beginner vs Advanced poses
    - Process these articles into the Vector DB
    - _Requirements: 3.2 Knowledge Base_

  - [ ] 2.3 Implement embedding service
    - Create embedding service using OpenAI or similar API
    - _Requirements: 1.2_

  - [ ] 2.4 Create vector database integration (Pinecone/Weaviate/Chroma)
    - Implement chunk storage with metadata
    - _Requirements: 1.3_

  - [ ] 2.5 Write property test for chunk storage and retrieval
    - **Property 3: Chunk Storage and Retrieval**

- [ ] 3. Implement retrieval engine
  - [ ] 3.1 Create similarity-based retrieval system
    - Implement query embedding and similarity search
    - _Requirements: 2.1, 2.2_

  - [ ] 3.2 Write property test for retrieval accuracy
    - **Property 5: Similarity-Based Retrieval Accuracy**

- [ ] 4. Implement response generation system
  - [ ] 4.1 Create LLM integration for response generation
    - Set up LLM API integration
    - **Prompt Engineering**: Instruct model to be a "Yoga Expert"
    - _Requirements: 3.1_

  - [ ] 4.2 Implement Source Citation & Format
    - Ensure output includes "Sources used" section
    - List titles/IDs of retrieved chunks
    - _Requirements: 3.1.2_

  - [ ] 4.3 Write property test for source citation completeness
    - **Property 7: Source Citation Completeness**

- [ ] 5. Implement Safety & Guardrails (Mandatory)
  - [ ] 5.1 Create Safety Detection Layer
    - **Pregnancy Detection**: Keywords "pregnant", "trimester", etc.
    - **Condition Detection**: Keywords "hernia", "glaucoma", "high blood pressure", "surgery"
    - _Requirements: 4.1_

  - [ ] 5.2 Implement Unsafe Response Handler
    - If `isUnsafe`, return specific warning structure
    - Add disclaimer: "Please consult a doctor or certified yoga therapist..."
    - Suggest gentle modifications instead of medical advice
    - _Requirements: 4.2_

  - [ ] 5.3 Write property test for Medical/Pregnancy detection
    - **Property 9: High-Risk Query Detection**
    - Verify that risky queries trigger the safety flag

- [ ] 6. Implement Backend API & Data Handling
  - [ ] 6.1 Create FastAPI Endpoints
    - `POST /ask`: Query input -> RAG -> Response
    - `POST /feedback`: User feedback (optional)
    - _Requirements: 6.2.1_

  - [ ] 6.2 Integrate MongoDB Logging
    - Store: User Queries, Retrieved Chunks, Final Answer, Safety Flags (`isUnsafe`)
    - _Requirements: 2.3_

  - [ ] 6.3 Write property test for Interaction Logging
    - **Property 13: Comprehensive Interaction Logging**

- [ ] 7. Implement Frontend User Interface
  - [ ] 7.1 Build Simple UI (React/FastAPI+HTML)
    - Search Bar: "Ask anything about yoga"
    - Button: "Get Answer"
    - _Requirements: 3.1.1_

  - [ ] 7.2 Implement Response Display
    - AI Answer Block (Fade-in animation)
    - **Sources Used** Block
    - **Safety Warning** Block (Red) if `isUnsafe`
    - _Requirements: 3.1.2, 4.2_

  - [ ] 7.3 Implement Layout & Design
    - Clean, extensive UI (optional but good for "wow" factor)
    - Loading indicators (spinner/skeleton)

- [ ] 8. Final integration and Deliverables
  - [ ] 8.1 Dockerize application
  - [ ] 8.2 Create README (Architecture, Setup, RAG choices)
  - [ ] 8.3 Record Demo Video (2-5 mins)
  - [ ] 8.4 Generate .apk (if mobile) OR Deploy instructions

## Notes
- Focus on the **Safety Layer** as it is 25% of the evaluation.
- Ensure **Data Logging** to MongoDB is robust.
- The **Knowledge Base** must be populated with actual yoga content for the RAG to work.